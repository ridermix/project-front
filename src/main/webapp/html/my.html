<html>
<head>
    <title>RPG</title>
    <script src=https://code.jquery.com/jquery-3.6.0.min.js></script>
    <link href="/css/my.css" rel="stylesheet">
</head>
<body>
<h1>RPG admin panel</h1>
<table id='table1'>
    <caption>Account list:</caption>
    <tr>
        <th>#</th>
        <th>Name</th>
        <th>Title</th>
        <th>Race</th>
        <th>Profession</th>
        <th>Level</th>
        <th>Birthday</th>
        <th>Banned</th>
    </tr>
</table>


<script>
    let url = "/rest/players"

    // function sendRequest(method, url) {
    //     return new Promise((resolve, reject) => {
    //         let xhr = new XMLHttpRequest()
    //
    //         xhr.open(method, url)
    //         xhr.responseType = 'json'
    //         xhr.onload = () => {
    //             if (xhr.status >= 400) {
    //                 reject(xhr.response)
    //             } else {
    //                 resolve(xhr.response)
    //             }
    //         }
    //         xhr.onerror = () => {
    //             reject(xhr.response)
    //         }
    //         xhr.send()
    //     })
    // }
    //
    // sendRequest('GET', url)
    //     .then(data => console.log(data))
    //     .catch(err => console.log(err))

    $.get(url, function (data) {
        $.each(data, function (key, value) {
            $('<tr>')
                .html('<td>' + value.id + '</td>'
                    + '<td>' + value.name + '</td>'
                    + '<td>' + value.title + '</td>'
                    + '<td>' + value.race + '</td>'
                    + '<td>' + value.profession + '</td>'
                    + '<td>' + value.level + '</td>'
                    + '<td>' + new Date(value.birthday).toLocaleDateString() + '</td>'
                    + '<td>' + value.banned + '</td>')
                .appendTo("#table1");
        });
    });


</script>

</body>
</html>